---
title: "Operating System - Process"
date: 2020-07-15
last_modified_at: 2020-07-15
desc: "OS 프로세스"
keywords: "OS,Operating System,Process,프로세스"
permalink: "/os/process"
categories: 
    - OS
tags: 
    - OS
    - Process
---

# 프로세스

비공식적으로 프로세스는 실행 중인 프로그램이다. 프로세스의 현재 활동의 상태는 프로그램 카운터(PC) 값과 프로세서 레지스터의 내용으로 나타낸다. 프로세스의 메모리 배치는 일반적으로 여러 섹션으로 구성되어 있으며 아래와 같다.

![imageProcess]({{ site.url }}{{ site.baseurl }}/assets/images/posts/image_os_process_01.png)

위의 이미지와 같이 프로세스는 아래와 같은 섹션들을 포함하고 있다.

* 힙 - 프로그램 실행 중에 동적으로 할당되는 메모리
* 스택 - 함수를 호출할 때 임시 데이터 저장장소(함수의 매개변수, 복귀 주소, 지역 변수 등등)
* 데이터 - 전역 변수
* 텍스트 - 실행 코드

텍스트 및 데이터 섹션은 크기가 고정되어있기 떄문에 프로그램 실행 시간 동안 크기가 변하지 않는다. 그러나 힙, 스택 섹션은 프로그램 실행 중에 동적으로 변동된다.

## 힙, 스택

------------
### 스택 

함수가 호출될 때마다 함수의 매개변수, 지역 변수 및 복귀 주소를 포함하는 활성화 레코드(activiation record)가 스택에 푸쉬(PUSH) 된다. 함수로부터 제어가 되돌아오면 스택에서 활성화 레코드가 팝(POP) 된다.

### 힙

스택과 마찬가지로 메모리가 동적으로 할당됨에 따라 힙이 커지고 메모리가 시스템에 반환되면 축소된다.

------------

스택 및 힙 섹션이 서로의 방향으로 커지더라도 운영체제는 서로 겹치지 않도록 조절해줘야 한다.

> 프로그램 그 자체는 프로세스가 아니다. 프로그램은 명령어 리스트를 내용으로 가진 디스크에 저장된 파일과 같은 수동적인 존재이다. 이와 반대로 프로세스는 다음에 실행할 명령어를 지정하는 프로그램 카운터와 관련 자원의 집합을 가진 능동적인 존재이다. **결론은 실행 파일이 메모리에 적재될 때 프로그램은 프로세스가 된다.**

## 프로세스 상태

프로세스는 실행되면서 상태가 수시로 변한다. 프로세스의 상태는 부분적으로 그 프로세스의 현재의 활동에 따라서 정의된다. 프로세스의 상태는 아래와 같다.

* 새로운(new) - 프로세스가 생성 중이다.
* 실행(running) - 명령어들이 실행되고 있다.
* 대기(waiting) - 프로세스가 어떤 이벤트가 일어나기를 기다린다.
* 준비(ready) - 프로세스가 프로세서에 할당되기를 기다린다.
* 종료(terminated) - 프로세스의 실행이 종료되었다.

> 상태의 이름은 운영체제마다 다르므로 임의적이다. 그렇지만, 모든 시스템에서 프로세스의 상태를 찾아볼 수 있다. 또한 어떤 운영체제는 프로세스의 상태를 더욱 자세하게 묘사하여 구별한다. **결론은 어느 한순간에 한 프로세서 코어에서 오직 하나의 프로세스만 실행된다는 것을 인식하는것이 중요하다.**

> 많은 프로세스가 준비완료 및 대기 상태에 있을 수 있다.

## 프로세스 제어 블록(PCB: Process Control Block)

각 프로세스는 운영체제에서 PCB에 의해 표현된다. PCB는 특정 프로세스와 연관된 여러 정보를 수록하며, 다음과 같은 것들을 포함한다.

* 프로세스 상태 - new, ready, running, waiting, halted 등이 있다.
* 프로그램 카운터 - 프로그램 카운터는 이 프로세스가 다음에 실행할 명령어의 주소를 가리킨다.
* CPU 레지스터들 - CPU 레지스터는 컴퓨터의 구조에 따라 다양한 수와 유형을 가진다. 레지스터에는 누산기, 인덱스, 스택, 범용 레지스터들과 상태 코드 정보가 포함된다. 프로그램 카운터와 함께 이 상태 정보는, 나중에 프로세스가 다시 스케줄 될 때 올바르게 실행되도록 하기 위해 인터럽트 발생 시 저장되어야 한다.
* CPU 스케줄링 정보 - 이 정보는 프로세스 우선순위, 스케줄 큐에 대한 포인터와 다른 스케줄 매개변수를 포함한다.
* 메모리 관리 정보 - 이 정보는 운영체제에 의해 사용되는 메모리 시스템에 따라 베이스, 리미트 레지스터의 값. 운영체제가 사용하는 메모리 시스템에 따라 페이지, 세그먼트 테이블 등과 같은 정보를 포함한다.
* 회계 정보 - 이 정보는 CPU 사용 시간과 경과된 실시간, 시간 제한, 계정 정보, 잡 또는 프로세스 번호 등을 포함한다.
* 입출력 상태 정보 - 이 정보는 이 프로세스에 할당된 입출력 장치들과 열린 파일의 목록 등을 포함한다.

**결론은 PCB는 약간의 회계 데이터와 함께 프로세스를 시작시키거나 다시 시작시키는 데 필요한 모든 데이터를 위한 저장소 역활을 한다.**

## 스레드

앞에서 얘기한 프로세스는 단일 실행 스레드를 실행하는 프로그램임을 의미한다. 예를 들면, 만일 한 프로세스가 워드 프로세서 프로그램을 실행 중이면, 실행되는 명령어의 단일 스레드가 존재한다. 이 단일 제어 스레드는 프로세스가 한 번에 한가지 일만 처리할 수 있도록 허용한다. 따라서 사용자는 문자를 입력하면서 동시에 철자 검사기를 실행할 수 없다.

> 대부분의 현대 운영체제는 프로세스 개념을 확장하여 한 프로세스가 다수의 실행 스레드를 가질 수 있도록 허용한다. 따라서 프로세스가 한 번에 하나 이상의 일을 수행할 수 있도록 허용한다. 이러한 특성은 특히 멀티 코어 프로세서에서 이익을 얻을 수 있는데, 여러 스레드가 병렬로 실행될 수 있다.


## 프로세스 스케줄링